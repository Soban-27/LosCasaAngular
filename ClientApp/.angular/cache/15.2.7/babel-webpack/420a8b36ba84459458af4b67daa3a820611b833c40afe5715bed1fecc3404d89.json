{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./rents.service\";\nimport * as i2 from \"@angular/router\";\nexport class RentsComponent {\n  constructor(rentService, route) {\n    this.rentService = rentService;\n    this.route = route;\n    this.dailyRate = 100;\n  }\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n    if (id == null) {\n      throw new Error('No Listing ID provided in the route.');\n    }\n    this.listingId = +id;\n  }\n  calculatePrice(startDate, endDate) {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diff = end.getTime() - start.getTime();\n    const days = diff / (1000 * 60 * 60 * 24); // Convert milliseconds to days\n    this.calculatedPrice = days * this.dailyRate;\n  }\n  rentListing(startDate, endDate) {\n    this.calculatePrice(startDate, endDate);\n    const newRent = {\n      listingId: this.listingId,\n      userId: this.userId,\n      startDate: new Date(startDate),\n      endDate: new Date(endDate),\n      price: this.calculatedPrice\n    };\n    this.rentService.createRent(newRent).subscribe({\n      next: rent => {\n        console.log('Rent created successfully', rent);\n      },\n      error: error => {\n        console.error('Error occurred while creating rent: ', error);\n      }\n    });\n  }\n}\nRentsComponent.ɵfac = function RentsComponent_Factory(t) {\n  return new (t || RentsComponent)(i0.ɵɵdirectiveInject(i1.RentService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\nRentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RentsComponent,\n  selectors: [[\"app-rents\"]],\n  decls: 23,\n  vars: 5,\n  consts: [[1, \"container\", \"rent-container\"], [1, \"rent-form\", 3, \"ngSubmit\"], [\"rentForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"startDate\"], [\"type\", \"date\", \"id\", \"startDate\", \"name\", \"startDate\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\", \"date-input\", 3, \"ngModelChange\"], [\"startDate\", \"ngModel\"], [\"for\", \"endDate\"], [\"type\", \"date\", \"id\", \"endDate\", \"name\", \"endDate\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\", \"date-input\", 3, \"ngModelChange\"], [\"endDate\", \"ngModel\"], [\"for\", \"price\"], [\"type\", \"text\", \"id\", \"price\", \"name\", \"price\", \"readonly\", \"\", 1, \"form-control\", \"price-input\", 3, \"value\"], [\"price\", \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-confirm\", 3, \"disabled\"]],\n  template: function RentsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r4 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n      i0.ɵɵtext(2, \"Rent Listing\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"form\", 1, 2);\n      i0.ɵɵlistener(\"ngSubmit\", function RentsComponent_Template_form_ngSubmit_3_listener() {\n        i0.ɵɵrestoreView(_r4);\n        const _r1 = i0.ɵɵreference(9);\n        const _r2 = i0.ɵɵreference(14);\n        return i0.ɵɵresetView(ctx.rentListing(_r1.value, _r2.value));\n      });\n      i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\", 4);\n      i0.ɵɵtext(7, \"Start Date:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"input\", 5, 6);\n      i0.ɵɵlistener(\"ngModelChange\", function RentsComponent_Template_input_ngModelChange_8_listener() {\n        i0.ɵɵrestoreView(_r4);\n        const _r1 = i0.ɵɵreference(9);\n        const _r2 = i0.ɵɵreference(14);\n        return i0.ɵɵresetView(ctx.calculatePrice(_r1.value, _r2.value));\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 3)(11, \"label\", 7);\n      i0.ɵɵtext(12, \"End Date:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"input\", 8, 9);\n      i0.ɵɵlistener(\"ngModelChange\", function RentsComponent_Template_input_ngModelChange_13_listener() {\n        i0.ɵɵrestoreView(_r4);\n        const _r1 = i0.ɵɵreference(9);\n        const _r2 = i0.ɵɵreference(14);\n        return i0.ɵɵresetView(ctx.calculatePrice(_r1.value, _r2.value));\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 3)(16, \"label\", 10);\n      i0.ɵɵtext(17, \"Price:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"input\", 11, 12);\n      i0.ɵɵpipe(20, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"button\", 13);\n      i0.ɵɵtext(22, \"Confirm Rent\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(4);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"value\", i0.ɵɵpipeBind2(20, 2, ctx.calculatedPrice, \"NOK\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !_r0.valid);\n    }\n  },\n  styles: [\".rent-container[_ngcontent-%COMP%] {\\r\\n  background: #fff;\\r\\n  padding: 2rem;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 0 10px rgba(0,0,0,0.1);\\r\\n  max-width: 600px;\\r\\n  margin: 2rem auto;\\r\\n}\\r\\n\\r\\n.rent-form[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.form-group[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 1rem;\\r\\n}\\r\\n\\r\\nlabel[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 0.5rem;\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n.date-input[_ngcontent-%COMP%] {\\r\\n  padding: 0.5rem;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n  .date-input[_ngcontent-%COMP%]:focus {\\r\\n    border-color: #007bff;\\r\\n  }\\r\\n\\r\\n.price-input[_ngcontent-%COMP%] {\\r\\n  padding: 0.5rem;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 4px;\\r\\n  text-align: right;\\r\\n}\\r\\n\\r\\n.btn-confirm[_ngcontent-%COMP%] {\\r\\n  padding: 0.5rem 1rem;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  color: #fff;\\r\\n  background-color: #007bff;\\r\\n  cursor: pointer;\\r\\n  transition: background-color 0.2s;\\r\\n}\\r\\n\\r\\n  .btn-confirm[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #0056b3;\\r\\n  }\\r\\n\\r\\n  .btn-confirm[_ngcontent-%COMP%]:disabled {\\r\\n    background-color: #cccccc;\\r\\n    cursor: not-allowed;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcmVudHMvcmVudHMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLG9DQUFvQztFQUNwQyxnQkFBZ0I7RUFDaEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxlQUFlO0VBQ2Ysc0JBQXNCO0VBQ3RCLGtCQUFrQjtBQUNwQjs7RUFFRTtJQUNFLHFCQUFxQjtFQUN2Qjs7QUFFRjtFQUNFLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLG9CQUFvQjtFQUNwQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCx5QkFBeUI7RUFDekIsZUFBZTtFQUNmLGlDQUFpQztBQUNuQzs7RUFFRTtJQUNFLHlCQUF5QjtFQUMzQjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixtQkFBbUI7RUFDckIiLCJzb3VyY2VzQ29udGVudCI6WyIucmVudC1jb250YWluZXIge1xyXG4gIGJhY2tncm91bmQ6ICNmZmY7XHJcbiAgcGFkZGluZzogMnJlbTtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDAsMCwwLjEpO1xyXG4gIG1heC13aWR0aDogNjAwcHg7XHJcbiAgbWFyZ2luOiAycmVtIGF1dG87XHJcbn1cclxuXHJcbi5yZW50LWZvcm0ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG5cclxuLmZvcm0tZ3JvdXAge1xyXG4gIG1hcmdpbi1ib3R0b206IDFyZW07XHJcbn1cclxuXHJcbmxhYmVsIHtcclxuICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi5kYXRlLWlucHV0IHtcclxuICBwYWRkaW5nOiAwLjVyZW07XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbn1cclxuXHJcbiAgLmRhdGUtaW5wdXQ6Zm9jdXMge1xyXG4gICAgYm9yZGVyLWNvbG9yOiAjMDA3YmZmO1xyXG4gIH1cclxuXHJcbi5wcmljZS1pbnB1dCB7XHJcbiAgcGFkZGluZzogMC41cmVtO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xyXG59XHJcblxyXG4uYnRuLWNvbmZpcm0ge1xyXG4gIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgY29sb3I6ICNmZmY7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xyXG59XHJcblxyXG4gIC5idG4tY29uZmlybTpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1NmIzO1xyXG4gIH1cclxuXHJcbiAgLmJ0bi1jb25maXJtOmRpc2FibGVkIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2NjY2M7XHJcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG4gIH1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;AAWA,OAAM,MAAOA,cAAc;EAMzBC,YACUC,WAAwB,EACxBC,KAAqB;IADrB,gBAAW,GAAXD,WAAW;IACX,UAAK,GAALC,KAAK;IAHf,cAAS,GAAW,GAAG;EAGY;EAEnCC,QAAQ;IACN,MAAMC,EAAE,GAAG,IAAI,CAACF,KAAK,CAACG,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,IAAI,CAAC;IACjD,IAAIH,EAAE,IAAI,IAAI,EAAE;MACd,MAAM,IAAII,KAAK,CAAC,sCAAsC,CAAC;;IAGzD,IAAI,CAACC,SAAS,GAAG,CAACL,EAAE;EACtB;EAEAM,cAAc,CAACC,SAAiB,EAAEC,OAAe;IAC/C,MAAMC,KAAK,GAAG,IAAIC,IAAI,CAACH,SAAS,CAAC;IACjC,MAAMI,GAAG,GAAG,IAAID,IAAI,CAACF,OAAO,CAAC;IAC7B,MAAMI,IAAI,GAAGD,GAAG,CAACE,OAAO,EAAE,GAAGJ,KAAK,CAACI,OAAO,EAAE;IAC5C,MAAMC,IAAI,GAAGF,IAAI,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;IAC3C,IAAI,CAACG,eAAe,GAAGD,IAAI,GAAG,IAAI,CAACE,SAAS;EAC9C;EAEAC,WAAW,CAACV,SAAiB,EAAEC,OAAe;IAC5C,IAAI,CAACF,cAAc,CAACC,SAAS,EAAEC,OAAO,CAAC;IAEvC,MAAMU,OAAO,GAAU;MACrBb,SAAS,EAAE,IAAI,CAACA,SAAS;MACzBc,MAAM,EAAE,IAAI,CAACA,MAAM;MACnBZ,SAAS,EAAE,IAAIG,IAAI,CAACH,SAAS,CAAC;MAC9BC,OAAO,EAAE,IAAIE,IAAI,CAACF,OAAO,CAAC;MAC1BY,KAAK,EAAE,IAAI,CAACL;KAEb;IAGD,IAAI,CAAClB,WAAW,CAACwB,UAAU,CAACH,OAAO,CAAC,CAACI,SAAS,CAAC;MAC7CC,IAAI,EAAGC,IAAI,IAAI;QACbC,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEF,IAAI,CAAC;MAChD,CAAC;MAEDG,KAAK,EAAGA,KAAK,IAAI;QACfF,OAAO,CAACE,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;MAC9D;KACD,CAAC;EAEJ;;AAlDWhC,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAiC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCX3BC,8BAAsC;MAChCA,4BAAY;MAAAA,iBAAK;MACrBA,kCAAoG;MAA9FA;QAAAA;QAAA;QAAA;QAAA,OAAYA,oDAA2C;MAAA,EAAC;MAE5DA,8BAAwB;MACCA,2BAAW;MAAAA,iBAAQ;MAC1CA,mCAA0L;MAAlFA;QAAAA;QAAA;QAAA;QAAA,OAAiBA,uDAA8C;MAAA,EAAC;MAAxKA,iBAA0L;MAG5LA,+BAAwB;MACDA,0BAAS;MAAAA,iBAAQ;MACtCA,oCAAoL;MAAlFA;QAAAA;QAAA;QAAA;QAAA,OAAiBA,uDAA8C;MAAA,EAAC;MAAlKA,iBAAoL;MAGtLA,+BAAwB;MACHA,uBAAM;MAAAA,iBAAQ;MACjCA,iCAAiJ;;MACnJA,iBAAM;MAENA,mCAA2E;MAAAA,6BAAY;MAAAA,iBAAS;;;;MAHDA,gBAA0C;MAA1CA,yEAA0C;MAG3FA,eAA4B;MAA5BA,qCAA4B","names":["RentsComponent","constructor","rentService","route","ngOnInit","id","snapshot","paramMap","get","Error","listingId","calculatePrice","startDate","endDate","start","Date","end","diff","getTime","days","calculatedPrice","dailyRate","rentListing","newRent","userId","price","createRent","subscribe","next","rent","console","log","error","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["D:\\Projects\\LosCasaAngular\\ClientApp\\src\\app\\rents\\rents.component.ts","D:\\Projects\\LosCasaAngular\\ClientApp\\src\\app\\rents\\rents.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { RentService } from './rents.service';\r\nimport { IRent } from './rent';\r\n\r\n@Component({\r\n  selector: 'app-rents',\r\n  templateUrl: './rents.component.html',\r\n  styleUrls: ['./rents.component.css']\r\n})\r\n\r\nexport class RentsComponent implements OnInit {\r\n  listingId!: number;\r\n  userId!: number; \r\n  calculatedPrice!: number;\r\n\r\n  dailyRate: number = 100;\r\n  constructor(\r\n    private rentService: RentService,\r\n    private route: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    const id = this.route.snapshot.paramMap.get('id');\r\n    if (id == null) {\r\n      throw new Error('No Listing ID provided in the route.');\r\n    }\r\n\r\n    this.listingId = +id;\r\n  }\r\n\r\n  calculatePrice(startDate: string, endDate: string): void {\r\n    const start = new Date(startDate);\r\n    const end = new Date(endDate);\r\n    const diff = end.getTime() - start.getTime();\r\n    const days = diff / (1000 * 60 * 60 * 24); // Convert milliseconds to days\r\n    this.calculatedPrice = days * this.dailyRate;\r\n  }\r\n\r\n  rentListing(startDate: string, endDate: string): void {\r\n    this.calculatePrice(startDate, endDate);\r\n\r\n    const newRent: IRent = {\r\n      listingId: this.listingId,\r\n      userId: this.userId,\r\n      startDate: new Date(startDate),\r\n      endDate: new Date(endDate),\r\n      price: this.calculatedPrice\r\n\r\n    };\r\n\r\n\r\n    this.rentService.createRent(newRent).subscribe({\r\n      next: (rent) => {\r\n        console.log('Rent created successfully', rent);\r\n      },\r\n\r\n      error: (error) => {\r\n        console.error('Error occurred while creating rent: ', error);\r\n      }\r\n    });\r\n\r\n  }\r\n}\r\n","<div class=\"container rent-container\">\r\n  <h2>Rent Listing</h2>\r\n  <form (ngSubmit)=\"rentListing(startDate.value, endDate.value)\" #rentForm=\"ngForm\" class=\"rent-form\">\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"startDate\">Start Date:</label>\r\n      <input type=\"date\" id=\"startDate\" class=\"form-control date-input\" name=\"startDate\" #startDate=\"ngModel\" (ngModelChange)=\"calculatePrice(startDate.value, endDate.value)\" ngModel required>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"endDate\">End Date:</label>\r\n      <input type=\"date\" id=\"endDate\" class=\"form-control date-input\" name=\"endDate\" #endDate=\"ngModel\" (ngModelChange)=\"calculatePrice(startDate.value, endDate.value)\" ngModel required>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"price\">Price:</label>\r\n      <input type=\"text\" id=\"price\" class=\"form-control price-input\" name=\"price\" #price=\"ngModel\" [value]=\"calculatedPrice | currency:'NOK'\" readonly>\r\n    </div>\r\n\r\n    <button type=\"submit\" class=\"btn btn-confirm\" [disabled]=\"!rentForm.valid\">Confirm Rent</button>\r\n  </form>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}