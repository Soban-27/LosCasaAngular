{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./listings.service\";\nimport * as i4 from \"@angular/common\";\nfunction ListingformComponent_form_3_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Name is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Price is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Price must be greater than or equal to 0. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Description is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Please enter a valid URL. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Please enter a valid URL. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Rooms is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Toilets is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Area is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListingformComponent_form_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function ListingformComponent_form_3_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.onSubmit());\n    });\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"label\", 5);\n    i0.ɵɵtext(3, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 6);\n    i0.ɵɵtemplate(5, ListingformComponent_form_3_div_5_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 4)(7, \"label\", 8);\n    i0.ɵɵtext(8, \"Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 9);\n    i0.ɵɵtemplate(10, ListingformComponent_form_3_div_10_Template, 2, 0, \"div\", 7);\n    i0.ɵɵtemplate(11, ListingformComponent_form_3_div_11_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 4)(13, \"label\", 10);\n    i0.ɵɵtext(14, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"textarea\", 11);\n    i0.ɵɵtemplate(16, ListingformComponent_form_3_div_16_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 4)(18, \"label\", 12);\n    i0.ɵɵtext(19, \"Image URL:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"input\", 13);\n    i0.ɵɵtemplate(21, ListingformComponent_form_3_div_21_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 4)(23, \"label\", 14);\n    i0.ɵɵtext(24, \"Additional Image URL:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(25, \"input\", 15);\n    i0.ɵɵtemplate(26, ListingformComponent_form_3_div_26_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"div\", 4)(28, \"label\", 16);\n    i0.ɵɵtext(29, \"Rooms:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(30, \"input\", 17);\n    i0.ɵɵtemplate(31, ListingformComponent_form_3_div_31_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"div\", 4)(33, \"label\", 18);\n    i0.ɵɵtext(34, \"Toilets:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(35, \"input\", 19);\n    i0.ɵɵtemplate(36, ListingformComponent_form_3_div_36_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"div\", 4)(38, \"label\", 20);\n    i0.ɵɵtext(39, \"Area:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(40, \"input\", 21);\n    i0.ɵɵtemplate(41, ListingformComponent_form_3_div_41_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"div\", 4)(43, \"label\", 22);\n    i0.ɵɵtext(44, \"Address:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(45, \"input\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    let tmp_2_0;\n    let tmp_3_0;\n    let tmp_4_0;\n    let tmp_5_0;\n    let tmp_6_0;\n    let tmp_7_0;\n    let tmp_8_0;\n    let tmp_9_0;\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.listingForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx_r0.listingForm.get(\"name\")) == null ? null : tmp_1_0.hasError(\"required\")) && ((tmp_1_0 = ctx_r0.listingForm.get(\"name\")) == null ? null : tmp_1_0.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r0.listingForm.get(\"price\")) == null ? null : tmp_2_0.hasError(\"required\")) && ((tmp_2_0 = ctx_r0.listingForm.get(\"price\")) == null ? null : tmp_2_0.touched));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_3_0 = ctx_r0.listingForm.get(\"price\")) == null ? null : tmp_3_0.hasError(\"min\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx_r0.listingForm.get(\"description\")) == null ? null : tmp_4_0.hasError(\"required\")) && ((tmp_4_0 = ctx_r0.listingForm.get(\"description\")) == null ? null : tmp_4_0.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx_r0.listingForm.get(\"imageUrl\")) == null ? null : tmp_5_0.hasError(\"pattern\")) && ((tmp_5_0 = ctx_r0.listingForm.get(\"imageUrl\")) == null ? null : tmp_5_0.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx_r0.listingForm.get(\"AdditionalImageUrl\")) == null ? null : tmp_6_0.hasError(\"pattern\")) && ((tmp_6_0 = ctx_r0.listingForm.get(\"AdditionalImageUrl\")) == null ? null : tmp_6_0.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx_r0.listingForm.get(\"Rooms\")) == null ? null : tmp_7_0.hasError(\"required\")) && ((tmp_7_0 = ctx_r0.listingForm.get(\"Rooms\")) == null ? null : tmp_7_0.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_8_0 = ctx_r0.listingForm.get(\"Toilets\")) == null ? null : tmp_8_0.hasError(\"required\")) && ((tmp_8_0 = ctx_r0.listingForm.get(\"Toilets\")) == null ? null : tmp_8_0.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_9_0 = ctx_r0.listingForm.get(\"Area\")) == null ? null : tmp_9_0.hasError(\"required\")) && ((tmp_9_0 = ctx_r0.listingForm.get(\"Area\")) == null ? null : tmp_9_0.touched));\n  }\n}\nexport class ListingformComponent {\n  constructor(_formbuilder, _router, _route, _listingService) {\n    this._formbuilder = _formbuilder;\n    this._router = _router;\n    this._route = _route;\n    this._listingService = _listingService;\n    this.isEditMode = false;\n    this.listingId = -1;\n    this.listingForm = _formbuilder.group({\n      name: ['', Validators.required],\n      price: [0, Validators.required],\n      description: ['', Validators.required],\n      imageUrl: ['', Validators.required],\n      AdditionalImageUrl: ['', Validators.required],\n      Rooms: [0, Validators.required],\n      Toilets: [0, Validators.required],\n      Area: [0, Validators.required],\n      Address: ['', Validators.required]\n    });\n  }\n  onSubmit() {\n    console.log(\"ListingCreate form submitted:\");\n    console.log(this.listingForm);\n    const newListing = this.listingForm.value;\n    if (this.isEditMode) {\n      this._listingService.updateListing(this.listingId, newListing).subscribe(response => {\n        if (response.success) {\n          console.log(response.message);\n          this._router.navigate(['/listings']);\n        } else {\n          console.log('Listing update failed');\n        }\n      });\n    } else {\n      this._listingService.createListing(newListing).subscribe(response => {\n        if (response.success) {\n          console.log(response.message);\n          this._router.navigate(['/listings']);\n        } else {\n          console.log('Listing creation failed');\n        }\n      });\n    }\n  }\n  backToListings() {\n    this._router.navigate(['/listings']);\n  }\n  ngOnInit() {\n    this._route.params.subscribe(params => {\n      if (params['mode'] === 'create') {\n        this.isEditMode = false; // Create mode\n      } else if (params['mode'] === 'edit') {\n        this.isEditMode = true; // Edit mode\n        this.listingId = +params['id']; // Convert to number\n        this.loadListingForEdit(this.listingId);\n      }\n    });\n  }\n  loadListingForEdit(listingId) {\n    this._listingService.getListingById(listingId).subscribe(listing => {\n      console.log('retrived listing: ', listing);\n      this.listingForm.patchValue({\n        name: listing.Name,\n        price: listing.Price,\n        description: listing.Description,\n        imageUrl: listing.ImageUrl,\n        AdditionalImageUrl: listing.AdditionalImageUrl,\n        Rooms: listing.Rooms || 0,\n        Toilets: listing.Toilets || 0,\n        Area: listing.Area || 0,\n        Address: listing.Address || ''\n      });\n    }, error => {\n      console.error('Error loading listing for edit:', error);\n    });\n  }\n}\nListingformComponent.ɵfac = function ListingformComponent_Factory(t) {\n  return new (t || ListingformComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ListingService));\n};\nListingformComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListingformComponent,\n  selectors: [[\"app-listings-listingform\"]],\n  decls: 8,\n  vars: 4,\n  consts: [[3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"price\"], [\"type\", \"number\", \"id\", \"price\", \"formControlName\", \"price\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"description\"], [\"id\", \"description\", \"formControlName\", \"description\", 1, \"form-control\"], [\"for\", \"imageUrl\"], [\"type\", \"text\", \"id\", \"imageUrl\", \"formControlName\", \"imageUrl\", 1, \"form-control\"], [\"for\", \"AdditionalImageUrl\"], [\"type\", \"text\", \"id\", \"AdditionalImageUrl\", \"formControlName\", \"AdditionalImageUrl\", 1, \"form-control\"], [\"for\", \"Rooms\"], [\"type\", \"text\", \"id\", \"Rooms\", \"formControlName\", \"Rooms\", 1, \"form-control\"], [\"for\", \"Toilets\"], [\"type\", \"text\", \"id\", \"Toilets\", \"formControlName\", \"Toilets\", 1, \"form-control\"], [\"for\", \"Area\"], [\"type\", \"text\", \"id\", \"Area\", \"formControlName\", \"Area\", 1, \"form-control\"], [\"for\", \"Address\"], [\"type\", \"text\", \"id\", \"Address\", \"formControlName\", \"Address\", 1, \"form-control\"], [1, \"text-danger\"]],\n  template: function ListingformComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\");\n      i0.ɵɵtemplate(3, ListingformComponent_form_3_Template, 46, 10, \"form\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 1);\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function ListingformComponent_Template_button_click_6_listener() {\n        return ctx.backToListings();\n      });\n      i0.ɵɵtext(7, \"Cancel\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\"\", ctx.isEditMode ? \"Update\" : \"Create\", \" Listing\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.listingForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.listingForm.invalid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", ctx.isEditMode ? \"Update\" : \"Create\", \" Listing \");\n    }\n  },\n  dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"body[_ngcontent-%COMP%] {\\r\\n}\\r\\n\\r\\nlabel[_ngcontent-%COMP%]{\\r\\n  font-weight: bold;\\r\\n  margin-top: 10px;\\r\\n  margin-bottom: 2px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGlzdGluZ3MvbGlzdGluZ2Zvcm0uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixrQkFBa0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyJib2R5IHtcclxufVxyXG5cclxubGFiZWx7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBtYXJnaW4tYm90dG9tOiAycHg7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAAiCA,UAAU,QAA0C,gBAAgB;;;;;;;;ICO/FC,+BAAmH;IACjHA,mCACF;IAAAA,iBAAM;;;;;IAMNA,+BAAqH;IACnHA,oCACF;IAAAA,iBAAM;;;;;IACNA,+BAA2E;IACzEA,2DACF;IAAAA,iBAAM;;;;;IAMNA,+BAAiI;IAC/HA,0CACF;IAAAA,iBAAM;;;;;IAMNA,+BAA0H;IACxHA,2CACF;IAAAA,iBAAM;;;;;IAMNA,+BAA8I;IAC5IA,2CACF;IAAAA,iBAAM;;;;;IAMNA,+BAAqH;IACnHA,oCACF;IAAAA,iBAAM;;;;;IAMNA,+BAAyH;IACvHA,sCACF;IAAAA,iBAAM;;;;;IAMNA,+BAAmH;IACjHA,mCACF;IAAAA,iBAAM;;;;;;IAlEVA,+BAA4E;IAAxBA;MAAAA;MAAA;MAAA,OAAYA,iCAAU;IAAA,EAAC;IAEzEA,8BAAwB;IACJA,qBAAK;IAAAA,iBAAQ;IAC/BA,2BAAoF;IACpFA,4EAEM;IACRA,iBAAM;IAENA,8BAAwB;IACHA,sBAAM;IAAAA,iBAAQ;IACjCA,2BAAwF;IACxFA,8EAEM;IACNA,8EAEM;IACRA,iBAAM;IAENA,+BAAwB;IACGA,6BAAY;IAAAA,iBAAQ;IAC7CA,gCAAyF;IACzFA,8EAEM;IACRA,iBAAM;IAENA,+BAAwB;IACAA,2BAAU;IAAAA,iBAAQ;IACxCA,6BAAmF;IACnFA,8EAEM;IACRA,iBAAM;IAENA,+BAAwB;IACUA,sCAAqB;IAAAA,iBAAQ;IAC7DA,6BAAuG;IACvGA,8EAEM;IACRA,iBAAM;IAENA,+BAAwB;IACHA,uBAAM;IAAAA,iBAAQ;IACjCA,6BAA6E;IAC7EA,8EAEM;IACRA,iBAAM;IAENA,+BAAwB;IACDA,yBAAQ;IAAAA,iBAAQ;IACrCA,6BAAiF;IACjFA,8EAEM;IACRA,iBAAM;IAENA,+BAAwB;IACJA,sBAAK;IAAAA,iBAAQ;IAC/BA,6BAA2E;IAC3EA,8EAEM;IACRA,iBAAM;IAENA,+BAAwB;IACDA,yBAAQ;IAAAA,iBAAQ;IACrCA,6BAAiF;IACnFA,iBAAM;;;;;;;;;;;;;IAxEkBA,8CAAyB;IAKzCA,eAAuF;IAAvFA,kMAAuF;IAQvFA,eAAyF;IAAzFA,oMAAyF;IAGzFA,eAA+C;IAA/CA,2GAA+C;IAQ/CA,eAAqG;IAArGA,gNAAqG;IAQrGA,eAA8F;IAA9FA,yMAA8F;IAQ9FA,eAAkH;IAAlHA,6NAAkH;IAQlHA,eAAyF;IAAzFA,oMAAyF;IAQzFA,eAA6F;IAA7FA,wMAA6F;IAQ7FA,eAAuF;IAAvFA,kMAAuF;;;ADzDnG,OAAM,MAAOC,oBAAoB;EAK/BC,YACUC,YAAyB,EACzBC,OAAe,EACfC,MAAsB,EACtBC,eAA+B;IAH/B,iBAAY,GAAZH,YAAY;IACZ,YAAO,GAAPC,OAAO;IACP,WAAM,GAANC,MAAM;IACN,oBAAe,GAAfC,eAAe;IAPzB,eAAU,GAAY,KAAK;IAC3B,cAAS,GAAW,CAAC,CAAC;IAQpB,IAAI,CAACC,WAAW,GAAGJ,YAAY,CAACK,KAAK,CAAC;MACpCC,IAAI,EAAE,CAAC,EAAE,EAAEV,UAAU,CAACW,QAAQ,CAAC;MAC/BC,KAAK,EAAE,CAAC,CAAC,EAAEZ,UAAU,CAACW,QAAQ,CAAC;MAC/BE,WAAW,EAAE,CAAC,EAAE,EAAEb,UAAU,CAACW,QAAQ,CAAC;MACtCG,QAAQ,EAAE,CAAC,EAAE,EAAEd,UAAU,CAACW,QAAQ,CAAC;MACnCI,kBAAkB,EAAE,CAAC,EAAE,EAAEf,UAAU,CAACW,QAAQ,CAAC;MAC7CK,KAAK,EAAE,CAAC,CAAC,EAAEhB,UAAU,CAACW,QAAQ,CAAC;MAC/BM,OAAO,EAAE,CAAC,CAAC,EAAEjB,UAAU,CAACW,QAAQ,CAAC;MACjCO,IAAI,EAAE,CAAC,CAAC,EAAElB,UAAU,CAACW,QAAQ,CAAC;MAC9BQ,OAAO,EAAE,CAAC,EAAE,EAAEnB,UAAU,CAACW,QAAQ;KAElC,CAAC;EACJ;EAEAS,QAAQ;IACNC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;IAC5CD,OAAO,CAACC,GAAG,CAAC,IAAI,CAACd,WAAW,CAAC;IAC7B,MAAMe,UAAU,GAAG,IAAI,CAACf,WAAW,CAACgB,KAAK;IACzC,IAAI,IAAI,CAACC,UAAU,EAAE;MACnB,IAAI,CAAClB,eAAe,CAACmB,aAAa,CAAC,IAAI,CAACC,SAAS,EAAEJ,UAAU,CAAC,CAC3DK,SAAS,CAACC,QAAQ,IAAG;QACpB,IAAIA,QAAQ,CAACC,OAAO,EAAE;UACpBT,OAAO,CAACC,GAAG,CAACO,QAAQ,CAACE,OAAO,CAAC;UAC7B,IAAI,CAAC1B,OAAO,CAAC2B,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;SACrC,MACI;UACHX,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;;MAExC,CAAC,CAAC;KACL,MACI;MACH,IAAI,CAACf,eAAe,CAAC0B,aAAa,CAACV,UAAU,CAAC,CAC3CK,SAAS,CAACC,QAAQ,IAAG;QACpB,IAAIA,QAAQ,CAACC,OAAO,EAAE;UACpBT,OAAO,CAACC,GAAG,CAACO,QAAQ,CAACE,OAAO,CAAC;UAC7B,IAAI,CAAC1B,OAAO,CAAC2B,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;SACrC,MACI;UACHX,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;;MAE1C,CAAC,CAAC;;EAER;EAEAY,cAAc;IACZ,IAAI,CAAC7B,OAAO,CAAC2B,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;EACtC;EAEAG,QAAQ;IACN,IAAI,CAAC7B,MAAM,CAAC8B,MAAM,CAACR,SAAS,CAACQ,MAAM,IAAG;MACpC,IAAIA,MAAM,CAAC,MAAM,CAAC,KAAK,QAAQ,EAAE;QAC/B,IAAI,CAACX,UAAU,GAAG,KAAK,CAAC,CAAC;OAC1B,MAAM,IAAIW,MAAM,CAAC,MAAM,CAAC,KAAK,MAAM,EAAE;QACpC,IAAI,CAACX,UAAU,GAAG,IAAI,CAAC,CAAC;QACxB,IAAI,CAACE,SAAS,GAAG,CAACS,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;QAChC,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACV,SAAS,CAAC;;IAE3C,CAAC,CAAC;EACJ;EAEAU,kBAAkB,CAACV,SAAiB;IAClC,IAAI,CAACpB,eAAe,CAAC+B,cAAc,CAACX,SAAS,CAAC,CAC3CC,SAAS,CACPW,OAAY,IAAI;MACflB,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEiB,OAAO,CAAC;MAC1C,IAAI,CAAC/B,WAAW,CAACgC,UAAU,CAAC;QAC1B9B,IAAI,EAAE6B,OAAO,CAACE,IAAI;QAClB7B,KAAK,EAAE2B,OAAO,CAACG,KAAK;QACpB7B,WAAW,EAAE0B,OAAO,CAACI,WAAW;QAChC7B,QAAQ,EAAEyB,OAAO,CAACK,QAAQ;QAC1B7B,kBAAkB,EAAEwB,OAAO,CAACxB,kBAAkB;QAC9CC,KAAK,EAAEuB,OAAO,CAACvB,KAAK,IAAI,CAAC;QACzBC,OAAO,EAAEsB,OAAO,CAACtB,OAAO,IAAI,CAAC;QAC7BC,IAAI,EAAEqB,OAAO,CAACrB,IAAI,IAAI,CAAC;QACvBC,OAAO,EAAEoB,OAAO,CAACpB,OAAO,IAAI;OAC7B,CAAC;IACJ,CAAC,EACA0B,KAAU,IAAI;MACbxB,OAAO,CAACwB,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACzD,CAAC,CACF;EACL;;AA5FW3C,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;QAApBA,oBAAoB;EAAA4C;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCVjCjD,0BAAI;MAAAA,YAA8C;MAAAA,iBAAK;MAEvDA,2BAAK;MACHA,yEA2EO;MACTA,iBAAM;MACJA,iCAA+E;MAC7EA,YACF;MAAAA,iBAAS;MACTA,iCAA6D;MAA3BA;QAAA,OAASkD,oBAAgB;MAAA,EAAC;MAAClD,sBAAM;MAAAA,iBAAS;;;MAnF1EA,eAA8C;MAA9CA,2EAA8C;MAGzCA,eAAiB;MAAjBA,sCAAiB;MA6EsBA,eAAgC;MAAhCA,kDAAgC;MAC5EA,eACF;MADEA,6EACF","names":["Validators","i0","ListingformComponent","constructor","_formbuilder","_router","_route","_listingService","listingForm","group","name","required","price","description","imageUrl","AdditionalImageUrl","Rooms","Toilets","Area","Address","onSubmit","console","log","newListing","value","isEditMode","updateListing","listingId","subscribe","response","success","message","navigate","createListing","backToListings","ngOnInit","params","loadListingForEdit","getListingById","listing","patchValue","Name","Price","Description","ImageUrl","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\aliso\\source\\repos\\LosCasaAngular12\\ClientApp\\src\\app\\listings\\listingform.component.ts","C:\\Users\\aliso\\source\\repos\\LosCasaAngular12\\ClientApp\\src\\app\\listings\\listingform.component.html"],"sourcesContent":["import { Component } from \"@angular/core\";\r\nimport { FormGroup, FormControl, Validators, FormBuilder, ReactiveFormsModule } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ListingService } from './listings.service';\r\n\r\n@Component({\r\n  selector: \"app-listings-listingform\",\r\n  templateUrl: \"./listingform.component.html\",\r\n  styleUrls: ['./listingform.component.css']\r\n})\r\nexport class ListingformComponent {\r\n  listingForm: FormGroup;\r\n  isEditMode: boolean = false;\r\n  listingId: number = -1;\r\n\r\n  constructor(\r\n    private _formbuilder: FormBuilder,\r\n    private _router: Router,\r\n    private _route: ActivatedRoute,\r\n    private _listingService: ListingService\r\n  ) {\r\n    this.listingForm = _formbuilder.group({\r\n      name: ['', Validators.required],\r\n      price: [0, Validators.required],\r\n      description: ['', Validators.required],\r\n      imageUrl: ['', Validators.required],\r\n      AdditionalImageUrl: ['', Validators.required],\r\n      Rooms: [0, Validators.required], \r\n      Toilets: [0, Validators.required],\r\n      Area: [0, Validators.required], \r\n      Address: ['', Validators.required] \r\n   \r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    console.log(\"ListingCreate form submitted:\");\r\n    console.log(this.listingForm);\r\n    const newListing = this.listingForm.value;\r\n    if (this.isEditMode) {\r\n      this._listingService.updateListing(this.listingId, newListing)\r\n        .subscribe(response => {\r\n          if (response.success) {\r\n            console.log(response.message);\r\n            this._router.navigate(['/listings']);\r\n          }\r\n          else {\r\n            console.log('Listing update failed');\r\n          }\r\n        });\r\n    }\r\n    else {\r\n      this._listingService.createListing(newListing)\r\n        .subscribe(response => {\r\n          if (response.success) {\r\n            console.log(response.message);\r\n            this._router.navigate(['/listings']);\r\n          }\r\n          else {\r\n            console.log('Listing creation failed');\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  backToListings() {\r\n    this._router.navigate(['/listings']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._route.params.subscribe(params => {\r\n      if (params['mode'] === 'create') {\r\n        this.isEditMode = false; // Create mode\r\n      } else if (params['mode'] === 'edit') {\r\n        this.isEditMode = true; // Edit mode\r\n        this.listingId = +params['id']; // Convert to number\r\n        this.loadListingForEdit(this.listingId);\r\n      }\r\n    });\r\n  }\r\n\r\n  loadListingForEdit(listingId: number) {\r\n    this._listingService.getListingById(listingId)\r\n      .subscribe(\r\n        (listing: any) => {\r\n          console.log('retrived listing: ', listing);\r\n          this.listingForm.patchValue({\r\n            name: listing.Name,\r\n            price: listing.Price,\r\n            description: listing.Description,\r\n            imageUrl: listing.ImageUrl,\r\n            AdditionalImageUrl: listing.AdditionalImageUrl,\r\n            Rooms: listing.Rooms || 0, \r\n            Toilets: listing.Toilets || 0, \r\n            Area: listing.Area || 0, \r\n            Address: listing.Address || ''\r\n          });\r\n        },\r\n        (error: any) => {\r\n          console.error('Error loading listing for edit:', error);\r\n        }\r\n      );\r\n  }\r\n\r\n}\r\n","<h2>{{ isEditMode ? 'Update' : 'Create' }} Listing</h2>\r\n\r\n<div>\r\n  <form *ngIf=\"listingForm\" [formGroup]=\"listingForm\" (ngSubmit)=\"onSubmit()\">\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name:</label>\r\n      <input type=\"text\" id=\"name\" formControlName=\"name\" class=\"form-control\" required />\r\n      <div *ngIf=\"listingForm.get('name')?.hasError('required') && listingForm.get('name')?.touched\" class=\"text-danger\">\r\n        Name is required.\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"price\">Price:</label>\r\n      <input type=\"number\" id=\"price\" formControlName=\"price\" class=\"form-control\" required />\r\n      <div *ngIf=\"listingForm.get('price')?.hasError('required') && listingForm.get('price')?.touched\" class=\"text-danger\">\r\n        Price is required.\r\n      </div>\r\n      <div *ngIf=\"listingForm.get('price')?.hasError('min')\" class=\"text-danger\">\r\n        Price must be greater than or equal to 0.\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description:</label>\r\n      <textarea id=\"description\" formControlName=\"description\" class=\"form-control\"></textarea>\r\n      <div *ngIf=\"listingForm.get('description')?.hasError('required') && listingForm.get('description')?.touched\" class=\"text-danger\">\r\n        Description is required.\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"imageUrl\">Image URL:</label>\r\n      <input type=\"text\" id=\"imageUrl\" formControlName=\"imageUrl\" class=\"form-control\" />\r\n      <div *ngIf=\"listingForm.get('imageUrl')?.hasError('pattern') && listingForm.get('imageUrl')?.touched\" class=\"text-danger\">\r\n        Please enter a valid URL.\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"AdditionalImageUrl\">Additional Image URL:</label>\r\n      <input type=\"text\" id=\"AdditionalImageUrl\" formControlName=\"AdditionalImageUrl\" class=\"form-control\" />\r\n      <div *ngIf=\"listingForm.get('AdditionalImageUrl')?.hasError('pattern') && listingForm.get('AdditionalImageUrl')?.touched\" class=\"text-danger\">\r\n        Please enter a valid URL.\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Rooms\">Rooms:</label>\r\n      <input type=\"text\" id=\"Rooms\" formControlName=\"Rooms\" class=\"form-control\" />\r\n      <div *ngIf=\"listingForm.get('Rooms')?.hasError('required') && listingForm.get('Rooms')?.touched\" class=\"text-danger\">\r\n        Rooms is required.\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Toilets\">Toilets:</label>\r\n      <input type=\"text\" id=\"Toilets\" formControlName=\"Toilets\" class=\"form-control\" />\r\n      <div *ngIf=\"listingForm.get('Toilets')?.hasError('required') && listingForm.get('Toilets')?.touched\" class=\"text-danger\">\r\n        Toilets is required.\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Area\">Area:</label>\r\n      <input type=\"text\" id=\"Area\" formControlName=\"Area\" class=\"form-control\" />\r\n      <div *ngIf=\"listingForm.get('Area')?.hasError('required') && listingForm.get('Area')?.touched\" class=\"text-danger\">\r\n        Area is required.\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Address\">Address:</label>\r\n      <input type=\"text\" id=\"Address\" formControlName=\"Address\" class=\"form-control\" />\r\n    </div>\r\n\r\n\r\n  </form>\r\n</div>\r\n  <button class='btn btn-primary' type=\"submit\" [disabled]=\"listingForm.invalid\">\r\n    {{ isEditMode ? 'Update' : 'Create' }} Listing\r\n  </button>\r\n  <button class='btn btn-secondary' (click)=\"backToListings()\">Cancel</button>\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}